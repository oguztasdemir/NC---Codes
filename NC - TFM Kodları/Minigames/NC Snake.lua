--Satırları düzenleyeceğim

local a,b=pcall(0)local c=string.match(b,"(.-)%.")local d=0;local e={0,1,2,3}local function f()cid,turns=1,0;tailId=1;score=0;foodx,foody=math.random(10,780),math.random(35,380)snake={color=0x33ee33,size=10,headx=400,heady=200,speed=6,direction=0}info={[1]={['x']=snake.headx,['y']=snake.heady,['direction']=snake.direction}}width={[1]=snake.size}end;f()local function g(h,i,j,k)local l=15;if h>j-l and h<j+l and i>k-l and i<k+l then return true end;return false end;local function m()ui.addTextArea(99999999,'<rose>Score: '..score..'</rose>',nil,10,32,nil,nil,0x000000,0x000000,0,true)end;local function n()ui.addTextArea(99999998,'<vp>Player: '..c..'</vp>',nil,135,32,nil,nil,0x000000,0x000000,0,true)end;tfm.exec.disableAutoShaman()tfm.exec.newGame('<C><P /><Z><S><S L="50" X="400" H="10" Y="246" T="1" P="0,0,0,0.2,0,0,0,0" /><S L="10" X="380" H="54" Y="215" T="1" P="0,0,0,0.2,0,0,0,0" /><S L="10" H="54" X="420" Y="216" T="1" P="0,0,0,0.2,0,0,0,0" /><S L="10" X="399" H="54" Y="205" T="1" P="0,0,0,0.2,-90,0,0,0" /><S L="802" X="400" H="29" Y="388" T="0" P="0,0,0.3,0.2,0,0,0,0" /><S L="10" X="440" H="54" Y="325" T="1" P="0,0,0,0.2,0,0,0,0" /><S L="10" H="54" X="360" Y="325" T="1" P="0,0,0,0.2,0,0,0,0" /></S><D><F Y="230" X="400" /><DS Y="359" X="400" /></D><O /></Z></C>')function eventPlayerGetCheese(b)if snake.direction==0 then ui.addTextArea(cid,'',nil,snake.headx-snake.speed,snake.heady,width[cid]+snake.speed,8,snake.color,snake.color,1,true)snake.headx=snake.headx-snake.speed elseif snake.direction==1 then ui.addTextArea(cid,'',nil,snake.headx,snake.heady-snake.speed,8,width[cid]+snake.speed,snake.color,snake.color,1,true)snake.heady=snake.heady-snake.speed elseif snake.direction==2 then ui.addTextArea(cid,'',nil,snake.headx-width[cid],snake.heady,width[cid]+snake.speed,8,snake.color,snake.color,1,true)snake.headx=snake.headx+snake.speed elseif snake.direction==3 then ui.addTextArea(cid,'',nil,snake.headx,snake.heady-width[cid],8,width[cid]+snake.speed,snake.color,snake.color,1,true)snake.heady=snake.heady+snake.speed end;width[cid]=width[cid]+snake.speed;tail=cid-turns;if width[tail]>snake.speed then width[tail]=width[tail]-snake.speed;if info[tail].direction==0 then ui.addTextArea(tail,'',nil,info[tail].x-width[tail],info[tail].y,width[tail],8,snake.color,snake.color,1,true)info[tail].x=info[tail].x-snake.speed elseif info[tail].direction==1 then ui.addTextArea(tail,'',nil,info[tail].x,info[tail].y-width[tail],8,width[tail],snake.color,snake.color,1,true)info[tail].y=info[tail].y-snake.speed elseif info[tail].direction==2 then ui.addTextArea(tail,'',nil,info[tail].x,info[tail].y,width[tail],8,snake.color,snake.color,1,true)info[tail].x=info[tail].x+snake.speed elseif info[tail].direction==3 then ui.addTextArea(tail,'',nil,info[tail].x,info[tail].y,8,width[tail],snake.color,snake.color,1,true)info[tail].y=info[tail].y+snake.speed end else ui.removeTextArea(tail)turns=turns-1 end;if g(snake.headx,snake.heady,foodx+7,foody+7)then foodx,foody=math.random(10,780),math.random(35,380)ui.addTextArea(999999999,'',nil,foodx,foody,15,15,0xff5555,0xff5555,1,true)width[tail]=width[tail]+20;score=score+10;m()end;tfm.exec.removeCheese(b)end;function eventChatCommand(b,o)if b==c then if o:sub(1,5)=='speed'then snake.speed=tonumber(o:sub(7))elseif o:sub(1,5)=='reset'then for p=1,cid do ui.removeTextArea(p)end;f()m()ui.addTextArea(999999999,'',nil,foodx,foody,15,15,0xff5555,0xff5555,1,true)elseif tfm.get.room.playerList[o]then c=o;n()end end end;function eventKeyboard(b,q)if q~=snake.direction and q>=0 and q<=3 and b==c then if not(snake.direction==0 and q==2 or snake.direction==2 and q==0 or snake.direction==1 and q==3 or snake.direction==3 and q==1)then if q==0 then snake.headx=snake.headx-snake.speed elseif q==1 then snake.heady=snake.heady-snake.speed elseif q==2 then snake.headx=snake.headx+snake.speed elseif q==3 then snake.heady=snake.heady+snake.speed end;snake.direction=q;turns=turns+1;cid=cid+1;width[cid]=snake.speed;info[cid]={['x']=snake.headx,['y']=snake.heady,['direction']=snake.direction}end end end;function eventNewPlayer(b)for a,q in next,e do system.bindKeyboard(b,q,false,true)end;if d<3 then tfm.exec.movePlayer(b,400,230)d=d+1 end;ui.addTextArea(0,'',b,-10,10,820,390,0x351101,0x351101,1,true)end;function eventPlayerLeft(b)d=d-1 end;function eventPlayerDied(b)tfm.exec.respawnPlayer(b)tfm.exec.movePlayer(b,400,230)end;for b in next,tfm.get.room.playerList do eventNewPlayer(b)end;ui.addTextArea(999999999,'',nil,foodx,foody,15,15,0xff5555,0xff5555,1,true)ui.addTextArea(cid,'',nil,390,189,snake.size,5,snake.color,snake.color,1,true)tfm.exec.disableAutoTimeLeft()tfm.exec.disableAutoNewGame()tfm.exec.disableAfkDeath()tfm.exec.disableMortCommand()tfm.exec.disablePhysicalConsumables()m()n()
